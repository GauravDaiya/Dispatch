import{a as m}from"./chunk-NF3GGHQY.js";import{a as f}from"./chunk-UCASUQWF.js";import{I as y,S as h,a,b as p,da as D,ga as o,la as c,qa as d,s as l}from"./chunk-UI7FGHJG.js";var u=class v{constructor(i){this.http=i}getAllDrivers(){return this.http.get("https://json-server-app-u17t.onrender.com/drivers")}createDriver(i){return this.http.post("https://json-server-app-u17t.onrender.com/drivers",i)}getDriverById(i){return this.http.get(`https://json-server-app-u17t.onrender.com/drivers/${i}`)}updateDriverStatus(i,r){return console.log(i,r),this.http.patch(`https://json-server-app-u17t.onrender.com/drivers/${i}`,{status:r})}editDriverData(i,r){return this.http.put(`https://json-server-app-u17t.onrender.com/drivers/${i}`,r)}DeleteDriverData(i){return this.http.delete(`https://json-server-app-u17t.onrender.com/drivers/${i}`)}static \u0275fac=function(r){return new(r||v)(d(f))};static \u0275prov=c({token:v,factory:v.\u0275fac,providedIn:"root"})};var b=class v extends m{constructor(r){super({DriversData:[],DriverReadById:{}});this._DriverService=r}Drivers$=this.select(r=>r.DriversData);DriverDataById$=this.select(r=>r.DriverReadById);loadDriversData=this.updater((r,e)=>p(a({},r),{DriversData:e}));DriverDataById=this.updater((r,e)=>p(a({},r),{DriverReadById:e}));createDriver=this.updater((r,e)=>p(a({},r),{DriversData:[...r.DriversData,e]}));updateDriver=this.updater((r,{updId:e,updDriverData:t})=>{let n=r.DriversData.map(s=>s.id===e?a(a({},s),t):s);return p(a({},r),{DriversData:n})});updateDriverStatus=this.updater((r,{updId:e,updStatus:t})=>{let n=r.DriversData.map(s=>s.id===e?p(a({},s),{status:t}):s);return p(a({},r),{DriversData:n})});deleteDriver=this.updater((r,e)=>{let t=r.DriversData.filter((n,s)=>n.id!=e);return p(a({},r),{DriversData:t})});loadAllDrivers=this.effect(r=>r.pipe(h(()=>this._DriverService.getAllDrivers().pipe(o(e=>{console.log("2"),console.log("Data received from API:",e),this.loadDriversData(e)}),y(e=>(console.error("Error fetching Driver:",e),l([])))))));addSingleDriverData=this.effect(r=>r.pipe(D(e=>this._DriverService.createDriver(e).pipe(o(t=>{this.createDriver(t)})))));getDriverDataById=this.effect(r=>r.pipe(D(e=>this._DriverService.getDriverById(e).pipe(o(t=>{t&&this.DriverDataById(t)})))));updateSingleDriverData=this.effect(r=>r.pipe(D(({updId:e,updDriverData:t})=>this._DriverService.editDriverData(e,t).pipe(o(n=>{n&&this.updateDriver({updId:e,updDriverData:t})})))));updateSingleDriverStatus=this.effect(r=>r.pipe(D(({updId:e,updStatus:t})=>this._DriverService.updateDriverStatus(e,t).pipe(o(n=>{n&&this.updateDriverStatus({updId:e,updStatus:t})})))));deleteSingleDriverData=this.effect(r=>r.pipe(D(e=>this._DriverService.DeleteDriverData(e).pipe(o(t=>{t&&this.deleteDriver(e)})))));static \u0275fac=function(e){return new(e||v)(d(u))};static \u0275prov=c({token:v,factory:v.\u0275fac})};export{b as a};
