import{a as ht}from"./chunk-DYA5ARDG.js";import{a as gt}from"./chunk-4HGYYCP2.js";import{a as mt,b as xt,c as bt,d as vt}from"./chunk-NF3GGHQY.js";import{b as I}from"./chunk-HSGMPGIY.js";import{a as ft,b as Ct}from"./chunk-RA4VD5ZQ.js";import{A as Je,B as Ke,C as Qe,D as Ye,E as et,F as tt,G as it,H as nt,I as ie,J as ne,K as ot,L as rt,M as at,N as oe,O as re,P as w,Q as lt,R as st,S as ct,T as ut,U as dt,V as pt,a as Te,da as _t,ea as St,h as Le,i as Ae,j as Fe,k as K,l as Q,m as te,t as ze,u as Oe,v as $e,w as Ue,x as Ge,y as We,z as Ze}from"./chunk-KCRUWNJC.js";import"./chunk-2DMVZMIS.js";import{b as Y,d as b,f as ee,g as ke,i as Re,j as Xe,k as qe,m as Ve,n as Be,o as Pe,p as je,r as He}from"./chunk-CY7E6JQX.js";import{k as fe}from"./chunk-UCASUQWF.js";import"./chunk-CARY4E7O.js";import{$b as G,Bc as de,Cc as pe,Ha as v,Hb as u,I as _e,Ia as y,Mb as s,Pb as A,S as be,Sc as Ne,Va as ye,Vb as o,Wb as t,Xb as c,Yb as x,Zb as _,a as E,b as T,cc as h,da as z,ec as g,ga as L,kd as Ie,la as Se,lb as ue,ma as O,md as J,oc as W,pb as m,pc as a,pd as we,qa as ve,qb as C,qc as Z,rc as p,s as xe,uc as Ee,vc as De,wc as Me,xa as N,ya as $,za as U,zc as F}from"./chunk-UI7FGHJG.js";var wt=function(i){return typeof i=="function"},Ce=function(){function i(){this._subs=[]}return i.prototype.add=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this._subs=this._subs.concat(n)},Object.defineProperty(i.prototype,"sink",{set:function(n){this._subs.push(n)},enumerable:!0,configurable:!0}),i.prototype.unsubscribe=function(){this._subs.forEach(function(n){return n&&wt(n.unsubscribe)&&n.unsubscribe()}),this._subs=[]},i}();var Tt={customer:{firstName:{required:"First name is required",minLength:"First name should be at least 1 character long"},businessName:{required:"Business name is required"},phoneNumber:{required:"Phone number is required"},carrierName:{required:"Carrier Name is required"},email:{required:"Please enter your email address",email:"Please enter a valid email address"},notes:{maxLength:"Notes must be less than 250 characters"},address:{required:"Address is required"},city:{required:"City is required"},state:{required:"State is required"},zip:{required:"Zip code is required",minlength:"Zip Code should be at least 5 digit long",pattern:"Zip Code should be at least 5 digit long"},country:{required:"Country is required"}}},D=class{messages;constructor(){this.messages=Tt}getMessage(n,e,r){return e&&r?this.messages[n][e][r]:e&&!r?this.messages[n][e]:this.messages[n]}},Di=new D;var S=class i extends mt{constructor(e){console.log("1");super({CustomerData:[]});this._CustomerService=e}CustomerData$=this.select(e=>e.CustomerData);loadcustomerdata=this.updater((e,r)=>(console.log("3"),console.log("Updating store with customer data:",r),T(E({},e),{CustomerData:r})));createCustomer=this.updater((e,r)=>T(E({},e),{CustomerData:[...e.CustomerData,r]}));deleteCustomer=this.updater((e,r)=>{let l=e.CustomerData.filter((d,f)=>d.id!=r);return T(E({},e),{CustomerData:l})});updateCustomer=this.updater((e,{updId:r,updCustomerData:l})=>{let d=e.CustomerData.map(f=>f.id===r?E(E({},f),l):f);return T(E({},e),{CustomerData:d})});loadAllCustomers=this.effect(e=>e.pipe(be(()=>this._CustomerService.getCustomers().pipe(L(r=>{console.log("2"),console.log("Data received from API:",r),this.loadcustomerdata(r)}),_e(r=>(console.error("Error fetching customers:",r),xe([])))))));addSingleCustomerData=this.effect(e=>e.pipe(z(r=>this._CustomerService.createCustomer(r).pipe(L(l=>{this.createCustomer(l)})))));deleteSingleCustomerData=this.effect(e=>e.pipe(z(r=>this._CustomerService.DeleteCustomerService(r).pipe(L(l=>{l&&this.deleteCustomer(r)})))));updateSingleCustomerData=this.effect(e=>e.pipe(z(({updId:r,updCustomerData:l})=>this._CustomerService.editCustomer(r,l).pipe(L(d=>{d&&this.updateCustomer({updId:r,updCustomerData:l})})))));static \u0275fac=function(r){return new(r||i)(ve(I))};static \u0275prov=Se({token:i,factory:i.\u0275fac})};var ae=class i{constructor(n){this.el=n}regex=new RegExp(/^[A-Z\s@~`!@#$%^&*()_=+\\\\';:\"\\/?>.<,â€™-]*$/i);specialKeys=["Tab","End","Home","-","ArrowLeft","ArrowRight"];onKeyDown(n){if(this.specialKeys.indexOf(n.key)!==-1)return;if(this.el.nativeElement.selectionStart===0&&n.key===" "){n.preventDefault();return}(this.el.nativeElement.value+n.key).match(this.regex)||n.preventDefault()}static \u0275fac=function(e){return new(e||i)(C(ye))};static \u0275dir=U({type:i,selectors:[["","appAlphabet",""]],hostBindings:function(e,r){e&1&&h("keydown",function(d){return r.onKeyDown(d)})}})};var me=class i{form;constructor(){}onSubmit(n){if(console.log(this.form),this.form?.invalid)for(let e in this.form.controls){let r=this.form.get(e);if(console.log(r,r?.invalid,r?.touched),r&&r.invalid){let l=document.querySelector(`[formControlName="${e}"]`);console.log(l),l&&l.scrollIntoView({behavior:"smooth",block:"center"});break}}}static \u0275fac=function(e){return new(e||i)};static \u0275dir=U({type:i,selectors:[["","appScrolltoinvalidfield",""]],hostBindings:function(e,r){e&1&&h("submit",function(d){return r.onSubmit(d)})},inputs:{form:"form"}})};var Et=()=>({"text-success":!0});function Bt(i,n){i&1&&(o(0,"mat-error"),a(1," Name must only contain letters and spaces. "),t())}function Pt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","firstName","required")," ")}}function jt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","businessName","required")," ")}}function Ht(i,n){i&1&&(o(0,"span"),a(1,"Phone number is required."),t())}function zt(i,n){if(i&1&&(o(0,"mat-error",67),u(1,Ht,2,0,"span",10),t()),i&2){let e,r=g();m(),s("ngIf",(e=r.customerform.get("phoneNumber"))==null||e.errors==null?null:e.errors.required)}}function Ot(i,n){i&1&&(o(0,"span"),a(1,"Invalid email format."),t())}function $t(i,n){if(i&1&&(o(0,"mat-error",67),u(1,Ot,2,0,"span",10),t()),i&2){let e,r=g();m(),s("ngIf",(e=r.customerform.get("address"))==null||e.errors==null?null:e.errors.email)}}function Ut(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","notes","maxLength")," ")}}function Gt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","firstName","required")," ")}}function Wt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","address","required")," ")}}function Zt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","city","required")," ")}}function Jt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","state","required")," ")}}function Kt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","country","required")," ")}}function Qt(i,n){if(i&1&&(o(0,"mat-error"),a(1),t()),i&2){let e=g();m(),p(" ",e.messages.getMessage("customer","zip","required")," ")}}var k=class i{constructor(n,e,r,l,d,f){this.data=n;this.messages=e;this.MatDialogRef=r;this.formBuilder=l;this.store=d;this._CustomerService=f;this.checkStatus(),this.customerId=this.data.customerId}customerform;isEditMode;customerId="";ngOnInit(){this.createCustomerForm(),this.customerId&&this._CustomerService.getCustomerReadByIdService(this.customerId).subscribe(n=>{this.customerform.patchValue(n)}),this.subscribeToCustomerSameContact()}createCustomerForm(){this.customerform=this.formBuilder.group({firstName:["",[b.required,b.minLength(2)]],lastName:[""],customerCompanyName:[""],businessName:["",[b.required]],accountNumber:[""],ein:[""],address:["",[b.email,b.required]],typeB:["business"],phoneNumber:["",[b.required]],ext:[""],countryCallingCode:["+1"],typeM:["mobile"],tagIds:[[]],tagSearch:[""],isCustomerSameContact:[!1],notes:["",[b.maxLength(250)]],locationFirstName:["",[b.required]],locationLastName:[""],locationphoneNumber:[""],locationext:["",b.maxLength(4)],locationtype:["mobile"],locationRadiotype:["residential"],searchlocation:[""],searchaddress:["",[b.required]],neighborhood:[""],city:["",[b.required]],state:["",[b.required]],zip:["",[b.required]],country:["",[b.required]]})}formSubmit(){let n=this.customerform.value;if(this.isEditMode){if(this.customerform.invalid)return;let e={updId:this.customerId,updCustomerData:n};this.store.updateSingleCustomerData(e);let r={api:!0};this.MatDialogRef.close(r)}else{if(this.customerform.invalid)return;this.store.addSingleCustomerData(n);let e={api:!0};this.MatDialogRef.close(e)}}subscribeToCustomerSameContact(){this.customerform.controls.isCustomerSameContact.valueChanges.subscribe(n=>{n?(this.customerform.controls.locationFirstName.setValue(this.customerform.get("firstName")?.value),this.customerform.controls.locationphoneNumber.setValue(this.customerform.get("phoneNumber")?.value)):(this.customerform.controls.locationFirstName.setValue(""),this.customerform.controls.locationphoneNumber.setValue(""))})}checkStatus(){this.isEditMode=!!this.data.edit}closeDialog(){let n={api:!1};this.MatDialogRef.close(n)}static \u0275fac=function(e){return new(e||i)(C(ne),C(D),C(ie),C(je),C(S),C(I))};static \u0275cmp=N({type:i,selectors:[["app-add-customer"]],decls:197,vars:20,consts:[[1,"d-flex","flex-column","add-customer"],[1,"position-sticky","border-bottom"],[1,"d-flex","p-3","justify-content-between","align-items-center"],[1,"fs-5","m-0","fw-bolder"],["role","button",3,"click"],[1,"text-secondary","fs-3","fw-bold"],["appScrolltoinvalidfield","",3,"ngSubmit","formGroup","form"],[1,"pt-2","row"],[1,"col-sm-4","col-6","px-2"],["type","text","formControlName","firstName","pattern","^[A-Za-z\\s]+$","capitalize","","placeholder","First name","matInput",""],[4,"ngIf"],["type","text","formControlName","lastName","capitalize","","placeholder","Last name","matInput",""],["type","text","formControlName","customerCompanyName","capitalize","","placeholder","Company name","matInput",""],["type","text","formControlName","businessName","capitalize","","placeholder","Business name","matInput",""],["type","text","formControlName","accountNumber","appAlphaNumeric","","maxlength","15","placeholder","Account number","matInput",""],[1,"col-4","px-2"],["type","text","formControlName","ein","mask","XX-XXXXXXX","placeholder","EIN","matInput",""],[1,"row"],[1,"col-8"],[1,"col-2","px-2"],["formControlName","typeM"],["value","mobile"],["value","landline"],["value","home"],["value","office"],["value","tollFree"],["value","none"],["type","text","formControlName","phoneNumber","placeholder","(XXX) XXX-XXX","mask","(XXX) XXX-XXXX","matInput",""],["class","text-danger",4,"ngIf"],["type","text","formControlName","ext","id","ext","maxlength","4","placeholder","Ext.","matInput",""],[1,"d-flex","col-3","px-2","justify-content-between","align-items-center"],["role","button",1,"d-flex","gap-1","align-items-center",3,"ngClass"],["formControlName","typeB"],["value","business"],["value","personal"],["value","other"],[1,"col-6","px-2"],["type","text","formControlName","address","placeholder","Ex. example@gmail.com","matInput",""],[1,"w-100","px-2"],["formControlName","notes","capitalize","","placeholder","Notes","matInput",""],[1,"fs-5"],[1,"row","align-items-center"],[1,"col-lg-5"],["formControlName","isCustomerSameContact",1,""],["formControlName","locationRadiotype","aria-label","Select an option",1,"d-flex","gap-2"],["checked","true","value","residential"],["value","both"],[1,"col-3","px-2"],["type","text","formControlName","locationFirstName","capitalize","","placeholder","First name","matInput",""],["type","text","formControlName","locationLastName","capitalize","","placeholder","Last name","matInput",""],[1,"col-6","d-flex","p-0"],["formControlName","locationtype"],["type","text","formControlName","locationphoneNumber","mask","(XXX) XXX-XXXX","placeholder","(XXX) XXX-XXX","matInput",""],["type","text","formControlName","locationext","placeholder","Ext.","id","locationExt","maxlength","4","matInput",""],["type","text","formControlName","searchlocation","capitalize","","placeholder","Location","matInput",""],[1,"col-lg-8","col-md-8","col-sm-12","col-12","px-2"],["type","text","formControlName","searchaddress","capitalize","","placeholder","Address","matInput",""],[1,"col-lg-4","col-md-4","col-sm-6","col-6","px-2"],["type","text","formControlName","neighborhood","capitalize","","placeholder","Neighborhood","matInput",""],[1,"col-lg-3","col-md-3","col-sm-6","col-6","px-2"],["type","text","formControlName","city","capitalize","","placeholder","City","appAlphabet","","matInput",""],["type","text","formControlName","state","capitalize","","placeholder","State","appAlphabet","","matInput",""],["type","text","formControlName","country","capitalize","","placeholder","Country","appAlphabet","","matInput",""],["type","text","formControlName","zip","capitalize","","placeholder","Zip","maxlength","12","appAlphaNumeric","","matInput",""],[1,"d-flex","justify-content-end","bg-light","gap-2"],["mat-raised-button","","type","button",1,"dark-outline-btn","mx-2",3,"click"],["mat-raised-button","","type","submit",1,"primary-btn"],[1,"text-danger"]],template:function(e,r){if(e&1&&(o(0,"div",0)(1,"header",1)(2,"div",2)(3,"h5",3),a(4),t(),o(5,"span",4),h("click",function(){return r.closeDialog()}),o(6,"mat-icon",5),a(7,"close"),t()()()(),o(8,"form",6),h("ngSubmit",function(){return r.formSubmit()}),o(9,"mat-dialog-content"),x(10),o(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),a(14,"First name"),t(),c(15,"input",9),u(16,Bt,2,0,"mat-error",10)(17,Pt,2,1,"mat-error",10),t(),o(18,"mat-form-field",8)(19,"mat-label"),a(20,"Last name"),t(),c(21,"input",11),t(),x(22),o(23,"mat-form-field",8)(24,"mat-label"),a(25,"Company name"),t(),c(26,"input",12),t(),o(27,"mat-form-field",8)(28,"mat-label"),a(29,"Business name"),t(),c(30,"input",13),u(31,jt,2,1,"mat-error",10),t(),o(32,"mat-form-field",8)(33,"mat-label"),a(34,"Account number"),t(),c(35,"input",14),t(),_(),o(36,"mat-form-field",15)(37,"mat-label"),a(38,"EIN"),t(),c(39,"input",16),t()(),o(40,"div",17)(41,"div",18)(42,"div",17)(43,"mat-form-field",19)(44,"mat-label"),a(45,"Type"),t(),o(46,"mat-select",20)(47,"mat-option",21),a(48,"Mobile"),t(),o(49,"mat-option",22),a(50,"Landline"),t(),o(51,"mat-option",23),a(52,"Home"),t(),o(53,"mat-option",24),a(54,"Office"),t(),o(55,"mat-option",25),a(56,"Tollfree"),t(),o(57,"mat-option",26),a(58,"None"),t()()(),o(59,"mat-form-field",15)(60,"mat-label"),a(61,"Phone number"),t(),c(62,"input",27),u(63,zt,2,1,"mat-error",28),t(),o(64,"mat-form-field",19)(65,"mat-label"),a(66,"Ext."),t(),c(67,"input",29),t(),o(68,"div",30)(69,"div",31)(70,"mat-icon"),a(71,"check_circle"),t(),o(72,"span"),a(73,"primary"),t()()()()(),o(74,"div",18)(75,"div",17)(76,"mat-form-field",19)(77,"mat-label"),a(78,"Type"),t(),o(79,"mat-select",32)(80,"mat-option",33),a(81,"Business"),t(),o(82,"mat-option",34),a(83,"Personal"),t(),o(84,"mat-option",35),a(85,"Other"),t()()(),o(86,"mat-form-field",36)(87,"mat-label"),a(88,"Email"),t(),c(89,"input",37),u(90,$t,2,1,"mat-error",28),t(),o(91,"div",30)(92,"div",31)(93,"mat-icon"),a(94,"check_circle"),t(),o(95,"span"),a(96,"primary"),t()()()()()(),o(97,"div",17)(98,"mat-form-field",38)(99,"mat-label"),a(100,"Notes"),t(),c(101,"textarea",39),u(102,Ut,2,1,"mat-error",10),t()(),x(103)(104),o(105,"div",40),a(106,"Location"),t(),o(107,"div",41)(108,"div",42)(109,"mat-checkbox",43),a(110,"Name & phone number same as above"),t()(),o(111,"div",42)(112,"h6"),a(113,"Location Type"),t(),o(114,"mat-radio-group",44)(115,"mat-radio-button",45),a(116,"Residential"),t(),o(117,"mat-radio-button",33),a(118,"Business"),t(),o(119,"mat-radio-button",46),a(120,"Both"),t()()()(),o(121,"div",7)(122,"mat-form-field",47)(123,"mat-label"),a(124,"First name"),t(),c(125,"input",48),u(126,Gt,2,1,"mat-error",10),t(),o(127,"mat-form-field",47)(128,"mat-label"),a(129,"Last name"),t(),c(130,"input",49),t(),o(131,"div",50)(132,"mat-form-field",47)(133,"mat-label"),a(134,"Type"),t(),o(135,"mat-select",51)(136,"mat-option",21),a(137,"Mobile"),t(),o(138,"mat-option",22),a(139,"Landline"),t(),o(140,"mat-option",23),a(141,"Home"),t(),o(142,"mat-option",24),a(143,"Office"),t(),o(144,"mat-option",25),a(145,"TollFree"),t(),o(146,"mat-option",26),a(147,"None"),t()()(),o(148,"mat-form-field",36)(149,"mat-label"),a(150,"Phone number"),t(),c(151,"input",52),t(),o(152,"mat-form-field",47)(153,"mat-label"),a(154,"Ext."),t(),c(155,"input",53),t()()(),o(156,"div",17)(157,"mat-form-field",38)(158,"mat-label"),a(159,"Search Location"),t(),c(160,"input",54),t()(),o(161,"div",7)(162,"mat-form-field",55)(163,"mat-label"),a(164,"Address line"),t(),c(165,"input",56),u(166,Wt,2,1,"mat-error",10),t(),o(167,"mat-form-field",57)(168,"mat-label"),a(169,"Neighborhood"),t(),c(170,"input",58),t(),o(171,"mat-form-field",59)(172,"mat-label"),a(173,"City"),t(),c(174,"input",60),u(175,Zt,2,1,"mat-error",10),t(),o(176,"mat-form-field",59)(177,"mat-label"),a(178,"State"),t(),c(179,"input",61),u(180,Jt,2,1,"mat-error",10),t(),o(181,"mat-form-field",59)(182,"mat-label"),a(183,"Country"),t(),c(184,"input",62),u(185,Kt,2,1,"mat-error",10),t(),o(186,"mat-form-field",59)(187,"mat-label"),a(188,"Zip code"),t(),c(189,"input",63),u(190,Qt,2,1,"mat-error",10),t()(),_()()(),t(),o(191,"mat-dialog-actions")(192,"footer",64)(193,"button",65),h("click",function(){return r.closeDialog()}),a(194,"Cancel"),t(),o(195,"button",66),a(196),t()()()()()),e&2){let l,d,f,R,X,ge,q,V,B,P,j,H;m(4),p("",r.isEditMode?"EDIT":"ADD"," CUSTOMER"),m(4),s("formGroup",r.customerform)("form",r.customerform),m(8),s("ngIf",((l=r.customerform.get("firstName"))==null?null:l.invalid)&&((l=r.customerform.get("firstName"))==null?null:l.touched)),m(),s("ngIf",((d=r.customerform.get("firstName"))==null?null:d.hasError("required"))&&((d=r.customerform.get("firstName"))==null?null:d.touched)),m(14),s("ngIf",((f=r.customerform.get("businessName"))==null?null:f.invalid)&&((f=r.customerform.get("businessName"))==null?null:f.touched)),m(32),s("ngIf",((R=r.customerform.get("phoneNumber"))==null?null:R.invalid)&&((R=r.customerform.get("phoneNumber"))==null?null:R.touched)),m(6),s("ngClass",F(18,Et)),m(21),s("ngIf",((X=r.customerform.get("address"))==null?null:X.invalid)&&((X=r.customerform.get("address"))==null?null:X.touched)),m(2),s("ngClass",F(19,Et)),m(10),s("ngIf",(ge=r.customerform.get("notes"))==null?null:ge.invalid),m(24),s("ngIf",((q=r.customerform.get("locationFirstName"))==null?null:q.invalid)&&((q=r.customerform.get("locationFirstName"))==null?null:q.touched)),m(40),s("ngIf",((V=r.customerform.get("searchaddress"))==null?null:V.invalid)&&((V=r.customerform.get("searchaddress"))==null?null:V.touched)),m(9),s("ngIf",((B=r.customerform.get("city"))==null?null:B.invalid)&&((B=r.customerform.get("city"))==null?null:B.touched)),m(5),s("ngIf",((P=r.customerform.get("state"))==null?null:P.invalid)&&((P=r.customerform.get("state"))==null?null:P.touched)),m(5),s("ngIf",((j=r.customerform.get("country"))==null?null:j.invalid)&&((j=r.customerform.get("country"))==null?null:j.touched)),m(5),s("ngIf",((H=r.customerform.get("zip"))==null?null:H.invalid)&&((H=r.customerform.get("zip"))==null?null:H.touched)),m(6),Z(r.isEditMode?"Update":"Save")}},dependencies:[Xe,Y,ee,ke,Be,Pe,qe,Ve,K,Le,Ae,Q,w,te,re,oe,ct,ut,dt,Te,pt,Ie,J,Ct,ht,ae,gt,me]})};var le=class i{constructor(n,e,r,l){this.data=n;this._CustomerService=e;this.store=r;this.matDialogRef=l;this.delId=n.customerId}delId;DeleteCustomer(){this.store.deleteSingleCustomerData(this.delId);let n={api:!0};this.matDialogRef.close(n)}static \u0275fac=function(e){return new(e||i)(C(ne),C(I),C(S),C(ie))};static \u0275cmp=N({type:i,selectors:[["app-confirmation"]],decls:10,vars:5,consts:[["mat-dialog-title",""],[1,"my-4","text-center"],["align","end"],["mat-stroked-button","","type","button",3,"mat-dialog-close"],["mat-stroked-button","","type","button",3,"click"]],template:function(e,r){e&1&&(o(0,"h4",0),a(1,"Delete Customer"),t(),o(2,"mat-dialog-content")(3,"h5",1),a(4,"Are you sure you want to delete this Customer ?"),t()(),o(5,"mat-dialog-actions",2)(6,"button",3),a(7,"Cancel"),t(),o(8,"button",4),h("click",function(){return r.DeleteCustomer()}),a(9,"Delete"),t()()),e&2&&(m(6),A("mx-2"),s("mat-dialog-close",!1),m(2),A("mx-2"))},dependencies:[w,rt,at,re,oe]})};var Yt=()=>["noDataFound"];function ei(i,n){if(i&1){let e=G();o(0,"button",37),h("click",function(){v(e);let l=g(),d=W(8);return d.value="",y(l.pageRefresh("searchReset"))}),o(1,"span",38),a(2,"close"),t()()}}function ti(i,n){i&1&&(o(0,"th",39),a(1," Customer Name "),t())}function ii(i,n){if(i&1&&(o(0,"td",40)(1,"div",41)(2,"div",42)(3,"label",43),a(4),t()(),o(5,"div"),a(6),t()()()),i&2){let e=n.$implicit;m(4),p(" ",e.firstName[0]," "),m(2),Z(e.firstName)}}function ni(i,n){i&1&&(o(0,"th",44),a(1," Email "),t())}function oi(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.address," ")}}function ri(i,n){i&1&&(o(0,"th",44),a(1," Business Name "),t())}function ai(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.businessName," ")}}function mi(i,n){i&1&&(o(0,"th",44),a(1," Phone "),t())}function li(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.phoneNumber," ")}}function si(i,n){i&1&&(o(0,"th",44),a(1," Country "),t())}function ci(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.country," ")}}function ui(i,n){i&1&&(o(0,"th",44),a(1," State "),t())}function di(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.state," ")}}function pi(i,n){i&1&&(o(0,"th",44),a(1," City "),t())}function fi(i,n){if(i&1&&(o(0,"td",45),a(1),t()),i&2){let e=n.$implicit;m(),p(" ",e.city," ")}}function Ci(i,n){i&1&&(o(0,"th",44),a(1," Action "),t())}function hi(i,n){if(i&1){let e=G();o(0,"td",45)(1,"button",46),h("click",function(){let l=v(e).$implicit,d=g();return y(d.editCustomer(l.id))}),c(2,"span",47),de(3,"icon"),t(),o(4,"button",46),h("click",function(){let l=v(e).$implicit,d=g();return y(d.deleteCustomer(l.id))}),c(5,"span",47),de(6,"icon"),t()()}i&2&&(m(2),s("innerHTML",pe(3,2,"tableActionEdit"),ue),m(3),s("innerHTML",pe(6,4,"tableActionDelete"),ue))}function gi(i,n){i&1&&c(0,"tr",48)}function xi(i,n){i&1&&c(0,"tr",49)}function _i(i,n){i&1&&(o(0,"td",50)(1,"p",51),a(2," No Data Found... "),t()())}function bi(i,n){if(i&1&&c(0,"tr",52),i&2){let e=g();s("hidden",e.isDataFound)}}var se=class i{constructor(n,e,r){this.dialog=n;this.store=e;this.cdRef=r;console.log("4")}length;AllCustomerData=[];FinalDataShow=[];currentPage=1;limit=10;searchString="";customers$;FilterData;isDataFound=!0;searchValue="";ngOnInit(){console.log("5"),this.store.loadAllCustomers(),this.customers$=this.store.CustomerData$,this.customers$.subscribe(n=>{n.length!=0&&(console.log("6"),this.UpdateTableData())})}hostClass="app-customer-list";subsink=new Ce;dataSource;displayedColumns=["fullName","email","businessName","phone","country","state","city","action"];tableSearching(n){this.customers$.subscribe(e=>{this.AllCustomerData=e}),this.searchString=n.toLocaleLowerCase().trim().replace(/\s/g,""),this.FilterData=this.AllCustomerData.filter(e=>{if(e.firstName.toLowerCase().trim().replace(/\s/g,"").startsWith(this.searchString))return e;if(e.businessName.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return console.log(this.searchString,e),e;if(e.address.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return e;if(e.locationphoneNumber.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return e;if(e.country.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return e;if(e.state.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return e;if(e.city.toLowerCase().trim().replace(/\s/g,"").includes(this.searchString))return e}),n?(console.log(n),this.AllCustomerData=this.FilterData,this.length=this.FilterData.length,this.ShowDataAccordingPage()):this.UpdateTableData()}pageRefresh(n){this.UpdateTableData()}paginationChange(n){console.log("7"),this.currentPage=n.currentPage,this.limit=n.limit,console.log(this.currentPage,this.limit),this.ShowDataAccordingPage()}UpdateTableData(){console.log("8"),this.customers$.subscribe(n=>{console.log(n),n.length&&(this.AllCustomerData=n,console.log(n.length),this.length=n.length,this.ShowDataAccordingPage())})}ShowDataAccordingPage(){console.log("9"),console.log(this.AllCustomerData),console.log(this.currentPage,this.limit),this.FinalDataShow=this.AllCustomerData.slice((this.currentPage-1)*this.limit,this.currentPage*this.limit),console.log(this.FinalDataShow),this.dataSource=new nt(this.FinalDataShow),this.AllCustomerData.length!=0?this.isDataFound=!0:this.isDataFound=!1,console.log(this.isDataFound),this.cdRef.detectChanges()}addCustomer(){this.dialog.open(k,{panelClass:"custom-dialog-container",maxWidth:"100%",minWidth:"60%",width:"70%",disableClose:!0,data:{edit:!1}}).afterClosed().subscribe(e=>{e.api&&this.UpdateTableData()})}editCustomer(n){this.dialog.open(k,{panelClass:"custom-dialog-container",maxWidth:"100%",minWidth:"60%",width:"70%",data:{edit:!0,customerId:n}}).afterClosed().subscribe(r=>{r.api&&this.UpdateTableData()})}deleteCustomer(n){this.dialog.open(le,{maxWidth:"500px",minWidth:"60%",width:"500px",data:{customerId:n}}).afterClosed().subscribe(r=>{r.api&&this.UpdateTableData()})}static \u0275fac=function(e){return new(e||i)(C(ot),C(S),C(Ne))};static \u0275cmp=N({type:i,selectors:[["app-customer-list"]],hostVars:2,hostBindings:function(e,r){e&2&&A(r.hostClass)},decls:58,vars:11,consts:[["search",""],["table",""],["id","page-header",1,"page-header"],[1,"d-flex","align-items-center"],[1,"page-title-area"],[1,"page-main-title"],[1,"page-filter-area","ms-3"],[1,"w-100"],["matInput","","type","text","placeholder","Search Customers",3,"keyup","ngModelChange","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],[1,"page-action-area","d-flex","align-items-center"],["mat-raised-button","",1,"primary-btn",3,"click"],["mat-mini-fab","",1,"primary-fab-btn","ms-2",3,"click"],["id","page-content",1,"page-content"],[1,"app-table-grid"],[1,"app-table-element","is-sticky"],["mat-table","",1,"app-table","table-style-1",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-center primary-text",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","businessName"],["matColumnDef","phone"],["matColumnDef","country"],["matColumnDef","state"],["matColumnDef","city"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["matColumnDef","noDataFound"],["mat-cell","","colspan","8",4,"matFooterCellDef"],["mat-footer-row","",3,"hidden",4,"matFooterRowDef"],[1,"pagination-wraper"],[3,"change","moduleName","totalRecords","length"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["mat-header-cell",""],["mat-cell","",1,"text-center","primary-text"],[1,"name-with-thumb"],[1,"column-image"],[1,"initials"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-icon-button","",3,"click"],[3,"innerHTML"],["mat-header-row",""],["mat-row",""],["mat-cell","","colspan","8"],[1,"text-center","mt-4"],["mat-footer-row","",3,"hidden"]],template:function(e,r){if(e&1){let l=G();o(0,"div",2)(1,"div",3)(2,"div",4)(3,"h2",5),a(4," Customers "),t()(),o(5,"div",6)(6,"mat-form-field",7)(7,"input",8,0),h("keyup",function(){v(l);let f=W(8);return y(r.tableSearching(f.value))}),Me("ngModelChange",function(f){return v(l),De(r.searchValue,f)||(r.searchValue=f),y(f)}),t(),u(9,ei,3,0,"button",9),o(10,"mat-icon",10),a(11,"search"),t()()()(),o(12,"div",11)(13,"button",12),h("click",function(){return v(l),y(r.addCustomer())}),a(14,"Add Customer"),t(),o(15,"button",13),h("click",function(){return v(l),y(r.pageRefresh("hardReset"))}),o(16,"mat-icon"),a(17,"sync"),t()()()(),o(18,"div",14)(19,"div",15)(20,"div",16)(21,"table",17,1),x(23,18),u(24,ti,2,0,"th",19)(25,ii,7,2,"td",20),_(),x(26,21),u(27,ni,2,0,"th",22)(28,oi,2,1,"td",23),_(),x(29,24),u(30,ri,2,0,"th",22)(31,ai,2,1,"td",23),_(),x(32,25),u(33,mi,2,0,"th",22)(34,li,2,1,"td",23),_(),x(35,26),u(36,si,2,0,"th",22)(37,ci,2,1,"td",23),_(),x(38,27),u(39,ui,2,0,"th",22)(40,di,2,1,"td",23),_(),x(41,28),u(42,pi,2,0,"th",22)(43,fi,2,1,"td",23),_(),x(44,29),u(45,Ci,2,0,"th",22)(46,hi,7,6,"td",23),_(),o(47,"tbody"),u(48,gi,1,0,"tr",30)(49,xi,1,0,"tr",31),t(),o(50,"tbody"),x(51)(52,32),u(53,_i,3,0,"td",33),_(),u(54,bi,1,1,"tr",34),_(),t()()()(),o(55,"div",35),x(56),o(57,"app-custom-pagination",36),h("change",function(f){return v(l),y(r.paginationChange(f))}),t(),_(),t()()}if(e&2){let l=W(8);m(7),Ee("ngModel",r.searchValue),m(2),s("ngIf",l.value),m(12),s("dataSource",r.dataSource),m(27),s("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),m(),s("matRowDefColumns",r.displayedColumns),m(5),s("matFooterRowDef",F(10,Yt)),m(3),s("moduleName","Customers")("totalRecords",r.length)("length",r.length)}},dependencies:[Y,ee,Re,K,Fe,Q,w,st,lt,te,Oe,Ue,Ke,We,$e,Ye,Ge,Qe,Ze,Je,et,it,tt,J,xt,ze],styles:[`#page-header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;padding:1rem 1.3rem}#page-header .page-title-area .page-main-title{text-align:left;font-weight:500;font-size:2rem;line-height:1.5rem;color:var(--black);letter-spacing:.5px;display:flex;align-items:center;margin-bottom:0}#page-header .page-filter-area{min-width:20rem!important}#page-content{padding:0rem 1rem}.dialog-content{padding:1rem 0rem}.app-table-element .mdc-button{padding:0!important;min-width:30px!important;text-align:center!important}.app-table-element .mat-mdc-button>.mat-icon{margin:0!important}
`],encapsulation:2})};var Si=[{path:"",component:se}],ce=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=$({type:i});static \u0275inj=O({imports:[fe.forChild(Si),fe]})};var It=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=$({type:i});static \u0275inj=O({providers:[D,S,ft()],imports:[_t,we,St,ce,He,bt,vt]})};export{It as CustomerModule};
